(function(e){"use strict";var t=function(t,n){var r=this;var i=e(t);var s;var o;var u;var a;var f;this.repeat=function(){if(i[0].novacancy){return true}else{i[0].novacancy=true;return false}};this.writeCSS=function(){var t=r.css();var n=e("<style>"+t+"</style>");e("body").append(n)};this.selector=function(){var e=i[0].tagName;if(i[0].id)e+="#"+i[0].id;if(i[0].className)e+="."+i[0].className;return e};this.css=function(){var e=this.selector();var t="";var n="";var r="";if(s.color!==null){t+="color: "+s.color+";";n+="color: "+s.color+"; opacity: 0.3;"}if(s.glow!==null){r+="text-shadow: "+s.glow.toString()+";";t+=r}var i="";i+=e+" .novacancy."+s.classOn+" { "+t+" }"+"\n";i+=e+" .novacancy."+s.classOff+" { "+n+" }"+"\n";return i};this.rand=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)};this.blink=function(e){r.off(e);e[0].blinking=true;setTimeout(function(){r.on(e);e[0].blinking=false;r.reblink(e)},r.rand(s.blinkMin,s.blinkMax))};this.reblink=function(e){setTimeout(function(){if(r.rand(1,100)<=s.reblinkProbability){r.blink(e)}},r.rand(s.blinkMin,s.blinkMax))};this.on=function(e){e.removeClass(s.classOff).addClass(s.classOn)};this.off=function(e){e.removeClass(s.classOn).addClass(s.classOff)};this.buildHTML=function(){var t="";e.each(i.contents(),function(n,r){if(r.nodeType==3){var i=r.nodeValue.split("");e.each(i,function(e,n){t+='<span class="novacancy '+s.classOn+'">'+n+"</span>"})}else{t+=r.outerHTML}});return t};this.arrayMake=function(){var t=a.length;var n=r.randomArray(t);var i;var o;var u=s.off;var f=s.blink;u=Math.min(u,t);u=Math.max(0,u);o=n.splice(0,u);e.each(o,function(t,n){r.off(e(a[n]))});f=f===0?t:f;f=Math.min(f,t-u);f=Math.max(0,f);i=n.splice(0,f);return i};this.randomArray=function(e){var t=[];var n;var r;var i;for(n=0;n<e;++n){t[n]=n}for(n=0;n<e;++n){r=parseInt(Math.random()*e,10);i=t[r];t[r]=t[n];t[n]=i}return t};this.loop=function(){if(!o)return;if(f.length===0)return;var t;var n;t=f[r.rand(0,f.length-1)];n=e(a[t]);if(!n[0].blinking)r.blink(n);u=setTimeout(function(){r.loop()},r.rand(s.loopMin,s.loopMax))};this.blinkOn=function(){if(!o){o=true;u=setTimeout(function(){r.loop()},r.rand(s.loopMin,s.loopMax))}};this.blinkOff=function(){if(o){o=false;clearTimeout(u)}};this.bindEvent=function(){i.on("blinkOn",function(e){r.blinkOn()});i.on("blinkOff",function(e){r.blinkOff()})};if(r.repeat())return true;s=n;o=false;u=0;i.html(r.buildHTML());a=i.find("span.novacancy");f=r.arrayMake();r.bindEvent();r.writeCSS();if(s.autoOn)r.blinkOn()};var n=function(t){var n=e.extend({reblinkProbability:1/3,blinkMin:.01,blinkMax:.5,loopMin:.5,loopMax:2,color:"ORANGE",glow:["0 0 80px Orange","0 0 30px Red","0 0 6px Yellow"],off:0,blink:0,classOn:"on",classOff:"off",autoOn:true},t);n.reblinkProbability*=100;n.blinkMin*=1e3;n.blinkMax*=1e3;n.loopMin*=1e3;n.loopMax*=1e3;return n};e.fn.novacancy=function(r){return e.each(this,function(e,i){new t(this,n(r))})}})(jQuery)